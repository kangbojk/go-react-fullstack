{"version":3,"sources":["config.js","components/LoginForm.jsx","components/MsgBoard.jsx","components/NavBar.jsx","components/ProgressBar.jsx","components/DashBoard.jsx","api/cookie.js","components/Err404.jsx","components/SignUp.jsx","api/auth.js","App.js","index.js"],"names":["config","url","api_url","api_auth_url","ws_url","loginForm","props","handleLogin","event","console","log","state","email","password","preventDefault","apiUrl","payload","axios","post","then","res","onLogin","catch","err","setState","errorLogin","handleInput","target","name","value","this","className","onSubmit","type","id","onChange","htmlFor","to","React","Component","MsgBoard","msg","NavBar","onClick","onLogout","ProgressBar","fetchData","tenantID","JSON","parse","Cookies","get","data","capacity","users","connect","connectInterval","ws","WebSocket","that","onopen","onmessage","update","timeout","clearTimeout","onclose","e","Math","min","reason","setTimeout","check","onerror","error","close","readyState","CLOSED","num_user","parseInt","Number","isInteger","onMsg","handleUpgrade","plan","getPlan","cap","100","1000","addUser","addition","handleUserInput","style","width","placeholder","DashBoard","handleLogout","document","cookie","handleMsg","message","sessionToken","Err404","process","SignUp","handleSignUp","isLogin","LoadingIcon","color","height","App","useState","login","setLogin","loading","setLoading","status","useEffect","a","set","stringify","remove","basename","exact","path","render","component","defaults","withCredentials","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b3064df5.chunk.js","sourcesContent":["const dev = {\r\n    url: {\r\n        api_url: \"http://localhost:8080/api/\",\r\n        api_auth_url: \"http://localhost:8080/auth/api/\",\r\n        ws_url: \"ws://localhost:8080/auth/\"\r\n    }\r\n};\r\n\r\nconst prod = {\r\n    url: {\r\n        api_url: \"https://peaceful-hamlet-17389.herokuapp.com/api/\",\r\n        api_auth_url: \"https://peaceful-hamlet-17389.herokuapp.com/auth/api/\",\r\n        ws_url: \"wss://peaceful-hamlet-17389.herokuapp.com/auth/\"\r\n    }\r\n};\r\n\r\nconst config = process.env.REACT_APP_STAGE === 'production'\r\n    ? prod\r\n    : dev;\r\n\r\nexport default {\r\n    ...config\r\n};","import React from 'react';\r\nimport axios from 'axios';\r\nimport './LoginForm.css'\r\n\r\nimport config from \"../config\"\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class loginForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            errorLogin: false\r\n        };\r\n    }\r\n\r\n    handleLogin = (event) => {\r\n        console.log(this.state.email, this.state.password);\r\n        event.preventDefault();\r\n\r\n        let apiUrl = config.url.api_url // read from config\r\n        console.log(\"server url: \", apiUrl)\r\n        let payload = {\r\n            \"email\": this.state.email,\r\n            \"password\": this.state.password\r\n        }\r\n\r\n        axios.post(apiUrl + 'login', payload).then(res => {\r\n            this.props.onLogin(true)\r\n            console.log(\"Login success!\")\r\n        }).catch(err => {\r\n            console.log(err)\r\n            this.setState({ errorLogin: true })\r\n        });\r\n    }\r\n\r\n    handleInput = (event) => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.errorLogin &&\r\n                    <div className=\"alertMsg\">\r\n                        Incorrect username or password.\r\n                    </div>\r\n                }\r\n                <form className=\"loginForm\" onSubmit={this.handleLogin}>\r\n                    <h1>Sign Into Your Account</h1>\r\n                    <div>\r\n                        <label>Email</label>\r\n                        <input type=\"email\" id=\"email\" name='email' className=\"field\" onChange={this.handleInput} />\r\n\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input type=\"password\" id=\"password\" name='password' className=\"field\" onChange={this.handleInput} />\r\n\r\n                    </div>\r\n\r\n                    <input type=\"submit\" value=\"Login to my Dashboard\" className=\"button block\"></input>\r\n                </form>\r\n\r\n\r\n                <div className=\"signup\">\r\n                    <Link to={\"/signup\"}>Create an account</Link>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\nimport './MsgBoard.css'\r\n\r\nexport default class MsgBoard extends React.Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.props.msg === 'warning' &&\r\n                    <div className=\"alert is-error\">\r\n                        You have exceeded the maximum number of users for your account, please upgrade your plan to increase the limit.\r\n                    </div>\r\n                }\r\n\r\n                {this.props.msg === 'success' &&\r\n                    <div className=\"alert is-success\">\r\n                        Your account has been upgraded successfully!\r\n                    </div>\r\n                }\r\n\r\n                {this.props.msg === 'Already upgrade' &&\r\n                    <div className=\"alert is-error\">\r\n                        Already upgraded to enterprise plan!\r\n                    </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\n\r\n\r\nimport './NavBar.css'\r\n\r\nexport default class NavBar extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <header className=\"top-nav\">\r\n                    <h1>\r\n                        <i className=\"logo\">X</i>User Management Dashboard</h1>\r\n                    <button className=\"button is-border\" onClick={this.props.onLogout}>Logout</button>\r\n                </header>\r\n            </div>\r\n        );\r\n    }\r\n}","import axios from 'axios';\r\nimport React from 'react';\r\nimport Cookies from 'js-cookie'\r\n\r\nimport './ProgressBar.css'\r\nimport config from \"../config\"\r\n\r\nexport default class ProgressBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ws: null,\r\n            plan: 'Startup',\r\n            users: 0,\r\n            capacity: 100,\r\n            addition: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n        this.connect();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.state.ws)\r\n            this.state.ws.close();\r\n    }\r\n\r\n    fetchData = () => {\r\n        let apiUrl = config.url.api_auth_url // read from config\r\n        let userCookie = JSON.parse(Cookies.get('user'))\r\n        let tenantID = userCookie['tenant_id']\r\n\r\n        axios.get(apiUrl + 'tenants/' + tenantID).then(res => {\r\n            console.log(res.data)\r\n            this.setState({ capacity: res.data['capacity'], users: res.data['users'] })\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    connect = () => {\r\n        var ws = new WebSocket(config.url.ws_url + \"ws/tenantUsers\"); // read from config\r\n        let that = this; // cache the this\r\n        var connectInterval;\r\n\r\n        ws.onopen = () => {\r\n            console.log(\"connect websocket main component\");\r\n            ws.onmessage = this.update;\r\n            this.setState({ ws: ws });\r\n\r\n            that.timeout = 500; // reset timer to 250 on open of websocket connection \r\n            clearTimeout(connectInterval); // clear Interval on on open of websocket connection\r\n        };\r\n\r\n        ws.onclose = e => {\r\n            if (that.timeout > 3000) {\r\n                console.log('stop retry')\r\n                clearTimeout(connectInterval);\r\n                return\r\n            }\r\n\r\n            console.log(\r\n                `Socket is closed. Reconnect will be attempted in ${Math.min(\r\n                    10000 / 1000,\r\n                    (that.timeout + that.timeout) / 1000\r\n                )} second.`,\r\n                e.reason\r\n            );\r\n\r\n            that.timeout = that.timeout + that.timeout; //increment retry interval\r\n            connectInterval = setTimeout(this.check, Math.min(10000, that.timeout)); //call check function after timeout\r\n        };\r\n\r\n        ws.onerror = err => {\r\n            console.error(\r\n                \"Socket encountered error: \",\r\n                err,\r\n                \"Closing socket\"\r\n            );\r\n\r\n            ws.close();\r\n        };\r\n    }\r\n\r\n    check = () => {\r\n        const { ws } = this.state;\r\n        if (!ws || ws.readyState === WebSocket.CLOSED) this.connect(); //check if websocket instance is closed, if so call `connect` function.\r\n    };\r\n\r\n    update = (event) => {\r\n        if (event.data) {\r\n\r\n            let num_user = parseInt(event.data, 10)\r\n            if (Number.isInteger(num_user)) {\r\n                this.setState({\r\n                    users: num_user,\r\n                })\r\n\r\n            } else\r\n                console.log(\"Not integer: \", num_user)\r\n\r\n            if (this.state.users >= this.state.capacity) // or fullError\r\n                this.props.onMsg('warning');\r\n        }\r\n    }\r\n\r\n    handleUpgrade = (event) => {\r\n        if (this.state.capacity === 1000) {\r\n            this.props.onMsg('Already upgrade')\r\n            return\r\n        }\r\n\r\n        let apiUrl = config.url.api_auth_url // read from config\r\n        axios.post(apiUrl + 'tenants/plan').then(res => {\r\n            this.setState({ capacity: res.data['capacity'], plan: 'Enterprise' })\r\n            this.props.onMsg('success');\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    getPlan = (cap) => {\r\n        let dict = {\r\n            100: \"Startup\",\r\n            1000: \"Enterprise\"\r\n        }\r\n\r\n        return dict[cap]\r\n    }\r\n\r\n    addUser = () => {\r\n        let apiUrl = config.url.api_auth_url // read from config\r\n\r\n        let payload = {\r\n            \"users\": parseInt(this.state.addition, 10),\r\n        }\r\n\r\n        axios.post(apiUrl + 'tenants/users', payload).then(res => {\r\n            if (res.data['full'])\r\n                this.props.onMsg('warning');\r\n            else\r\n                this.props.onMsg()\r\n        }).catch(err => {\r\n            console.log(err)\r\n        });\r\n    }\r\n\r\n    handleUserInput = (event) => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"plan\">\r\n                <header>{this.getPlan(this.state.capacity)} Plan - ${this.state.capacity}/Month</header>\r\n\r\n                <div className=\"plan-content\">\r\n                    <div className=\"progress-bar\">\r\n                        <div className=\"progress-bar-usage\" style={{ width: (this.state.users / this.state.capacity * 100) + '%' }}></div>\r\n                    </div>\r\n\r\n                    <h3>Users: {this.state.users}/{this.state.capacity}</h3>\r\n                </div>\r\n\r\n                <footer>\r\n                    <button className=\"button is-success\" onClick={this.handleUpgrade}>Upgrade to Enterprise Plan</button>\r\n\r\n                    <input\r\n                        className=\"inputField\"\r\n                        type=\"number\"\r\n                        name='addition'\r\n                        onChange={this.handleUserInput}\r\n                        placeholder=\"0\"\r\n                    />\r\n\r\n                    <button className=\"button \" onClick={this.addUser}>Add user</button>\r\n\r\n                </footer>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport axios from 'axios';\r\n\r\nimport MsgBoard from './MsgBoard'\r\nimport NavBar from './NavBar'\r\nimport ProgressBar from './ProgressBar'\r\n\r\nimport { eraseCookie } from '../api/cookie'\r\nimport config from \"../config\"\r\n\r\nexport default class DashBoard extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            sessionToken: '',\r\n            msg: ''\r\n        };\r\n    }\r\n\r\n    handleLogout = () => {\r\n        let apiUrl = config.url.api_auth_url // read from config\r\n\r\n        axios.post(apiUrl + 'logout').then(res => {\r\n            this.props.onLogin(false)\r\n            eraseCookie('sid')\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    handleMsg = (message) => {\r\n        this.setState({ msg: message });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <NavBar onLogout={this.handleLogout} />\r\n                <MsgBoard msg={this.state.msg} />\r\n                <ProgressBar onMsg={this.handleMsg} />\r\n            </>\r\n        );\r\n    }\r\n}","export function eraseCookie(name) {\r\n    document.cookie = name + '=; Max-Age=0'\r\n}","import React from 'react';\r\n\r\nexport default class Err404 extends React.Component {\r\n    render() {\r\n        console.log(process.env.PUBLIC_URL)\r\n        return (\r\n            <div>\r\n\r\n                <div className=\"\">\r\n                    Page not found\r\n                    </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport axios from 'axios';\r\nimport './LoginForm.css'\r\n\r\nimport config from \"../config\"\r\n\r\nexport default class SignUp extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n        };\r\n    }\r\n\r\n    handleSignUp = (event) => {\r\n        event.preventDefault();\r\n\r\n        let apiUrl = config.url.api_url // read from config        \r\n        let payload = {\r\n            \"email\": this.state.email,\r\n            \"password\": this.state.password\r\n        }\r\n\r\n        axios.post(apiUrl + 'accounts', payload).then(res => {\r\n            this.props.onLogin(true)\r\n            console.log(\"Sign up success!\")\r\n        }).catch(err => {\r\n            console.log(err)\r\n        });\r\n    }\r\n\r\n    handleInput = (event) => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <form className=\"loginForm\" onSubmit={this.handleSignUp}>\r\n                    <h1>Register An Account</h1>\r\n                    <div>\r\n                        <label>Email</label>\r\n                        <input type=\"email\" id=\"email\" name='email' className=\"field\" onChange={this.handleInput} />\r\n\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input type=\"password\" id=\"password\" name='password' className=\"field\" onChange={this.handleInput} />\r\n\r\n                    </div>\r\n\r\n                    <input type=\"submit\" value=\"SignUp\" className=\"button block\"></input>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}","import axios from 'axios';\r\nimport config from \"../config\"\r\n\r\nexport const isLogin = () => {\r\n    let apiUrl = config.url.api_auth_url // read from config    \r\n    return axios.get(apiUrl + 'account', {\r\n        timeout: 700 // add timeout since wake up heroku free dyno during initial request take too long\r\n    });\r\n}","import React from 'react';\nimport { useState, useEffect } from 'react';\n\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\nimport './App.css';\nimport LoginForm from './components/LoginForm'\nimport DashBoard from './components/DashBoard'\nimport Err404 from './components/Err404'\nimport SignUp from './components/SignUp'\nimport { isLogin } from './api/auth'\n\nimport ReactLoading from 'react-loading';\nimport Cookies from 'js-cookie'\n\n\n\nconst LoadingIcon = ({ type, color }) => (\n  <ReactLoading className=\"preloader\" type={type} color={color} height={'20%'} width={'20%'} />\n);\n\nfunction App() {\n  const [login, setLogin] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const handleLogin = (status) => {\n    console.log(\"handleLogin: \", status)\n    setLogin(status)\n  };\n\n  useEffect(() => {\n    setLoading(true)\n    async function fetchData() {\n      try {\n        const res = await isLogin();\n        if (res.status === 200) {\n          setLogin(true)\n          Cookies.set('user', JSON.stringify(res.data))\n        }\n        else {\n          setLogin(false)\n          Cookies.remove('user')\n        }\n        setLoading(false)\n      } catch (err) {\n        console.log(err)\n        setLogin(false)\n        setLoading(false)\n        Cookies.remove('user')\n      }\n    }\n\n    // show loading icon \n    setTimeout(() => {\n      fetchData()\n    }, 200);\n\n  }, [login]);\n\n  if (loading === true) {\n    return <LoadingIcon type={\"bubbles\"} color=\"#00FFFF\" />\n  }\n\n  return (\n    <Router basename=\"/\">\n      <Switch >\n        <Route exact path=\"/\" render={() => (\n          login\n            // ? <Redirect to={process.env.PUBLIC_URL + \"/dashboard\"} />\n            // : <Redirect to={process.env.PUBLIC_URL + \"/login\"} />\n            ? <Redirect to={\"/dashboard\"} />\n            : <Redirect to={\"/login\"} />\n        )} />\n\n        {/* <Route exact path={process.env.PUBLIC_URL + \"/\"} render={() => (\n        <Route exact path={\"/\"} render={() => (\n          login\n            ? <Redirect to={process.env.PUBLIC_URL + \"/dashboard\"} />\n            : <Redirect to={process.env.PUBLIC_URL + \"/login\"} />\n            ? <Redirect to={\"/dashboard\"} />\n            : <Redirect to={\"/login\"} />\n        )} /> */}\n\n        {/* <Route path={process.env.PUBLIC_URL + \"/dashboard\"} render={() => ( */}\n        <Route path={\"/dashboard\"} render={() => (\n          login\n            ? <DashBoard onLogin={handleLogin} />\n            // : <Redirect to={process.env.PUBLIC_URL + \"/login\"} />            \n            : <Redirect to={\"/login\"} />\n        )} />\n\n        {/* <Route path={process.env.PUBLIC_URL + \"/login\"} render={() => ( */}\n        <Route path={\"/login\"} render={() => (\n          login\n            // ? <Redirect to={process.env.PUBLIC_URL + \"/dashboard\"} />\n            ? <Redirect to={\"/dashboard\"} />\n            : <LoginForm onLogin={handleLogin} />\n        )} />\n\n\n        {/* <Route path={process.env.PUBLIC_URL + \"/signup\"} render={() => ( */}\n        <Route path={\"/signup\"} render={() => (\n          login\n            // ? <Redirect to={process.env.PUBLIC_URL + \"/dashboard\"} />\n            ? <Redirect to={\"/dashboard\"} />\n            : <SignUp onLogin={handleLogin} />\n        )} />\n\n        <Route component={Err404} />\n\n      </Switch >\n\n    </Router >\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nimport axios from 'axios';\n\n// send request with cookie\naxios.defaults.withCredentials = true\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}